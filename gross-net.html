<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta http-equiv="Content-Security-Policy" content="default-src 'self' 'unsafe-inline' blob: data: file:; script-src 'self' 'unsafe-inline' 'unsafe-eval'; style-src 'self' 'unsafe-inline'; img-src 'self' data: blob:; connect-src 'self' data: blob: file:; frame-src 'none'">
  <title>FinBoard ¬∑ Gross/Net –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä</title>
  <link rel="stylesheet" href="assets/styles.css" />
  <script src="assets/prefs.js"></script>
  <script src="assets/help.js"></script>
  <script src="assets/charts.js"></script>
  <script>
    const $ = (sel,root=document)=>root.querySelector(sel)
    const $$ = (sel,root=document)=>Array.from(root.querySelectorAll(sel))
    function initTheme(){ try{ if(window.PREFS && PREFS.initThemeFromPrefs){ PREFS.initThemeFromPrefs(); return } }catch(_){ } const saved = localStorage.getItem('finboard_theme')||'dark'; document.documentElement.setAttribute('data-theme', saved) }
    function toggleTheme(){ try{ if(window.PREFS && PREFS.toggleThemeByPrefs){ PREFS.toggleThemeByPrefs(); return } }catch(_){ } const cur=document.documentElement.getAttribute('data-theme')||'dark'; const next=cur==='dark'?'light':'dark'; document.documentElement.setAttribute('data-theme',next); localStorage.setItem('finboard_theme',next) }
    function toast(text){ let el=document.getElementById('toast'); if(!el){ el=document.createElement('div'); el.id='toast'; el.style.position='fixed'; el.style.right='16px'; el.style.bottom='16px'; el.style.zIndex='9999'; el.style.maxWidth='320px'; document.body.appendChild(el) } el.innerHTML = `<div class="success">${text}</div>`; setTimeout(()=>{el.innerHTML=''},2000) }
    let HELP_VISIBLE=false
    function toggleHelp(){ HELP_VISIBLE=!HELP_VISIBLE; const helpToggle=$('#helpToggle'); const helpBlock=$('#helpBlock'); if(helpToggle){ helpToggle.classList.toggle('active', HELP_VISIBLE); helpToggle.title = HELP_VISIBLE?'–°–∫—Ä—ã—Ç—å —Å–ø—Ä–∞–≤–∫—É':'–ü–æ–∫–∞–∑–∞—Ç—å —Å–ø—Ä–∞–≤–∫—É' } if(helpBlock){ helpBlock.style.display = HELP_VISIBLE?'block':'none' } }
  </script>
  <script defer src="assets/grossnet.js"></script>
  <script defer src="assets/salary-timer.js"></script>
  <style>
    .gn-section h2{margin:0 0 8px 0;font-size:16px}
    .gn-kpis{display:grid;gap:8px}
    .opt-block{border:1px solid var(--grid);border-radius:12px;padding:12px;margin-top:8px;background:var(--chip)}
    .opt-head{display:flex;align-items:center;gap:8px;font-weight:600;margin-bottom:8px}
    .opt-toggles{display:flex;gap:6px;flex-wrap:wrap;align-items:center}
    .opt-toggles .pill{justify-content:flex-start;padding:2px 8px;height:28px;font-size:13px;gap:6px}
    .opt-toggles .pill input[type="checkbox"]{margin:0 6px 0 0;transform:none}

    /* GN page: allow cards to grow with content (override FinBoard fixed heights) */
    .content.gn .row{align-items:start}
    .content.gn .row.cols-2{grid-auto-rows:auto}
    .content.gn .row .card{height:auto;max-height:none}
  </style>
</head>
<body>
<div class="app">
  <header>
    <nav class="top-nav">
      <a href="index.html" title="FinBoard">FinBoard</a>
      <a href="gross-net.html" class="active" title="Gross/Net">Gross/Net</a>
    </nav>
    <div class="spacer"></div>
    <h1>Gross/Net –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä</h1>
    <div class="spacer"></div>
    <div class="pill" id="currencySwitcher" title="–í–∞–ª—é—Ç–∞ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è (—Ç–æ–ª—å–∫–æ –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä)">
      <label class="muted" for="selCurrency" style="margin:0">–í–∞–ª—é—Ç–∞:</label>
      <select id="selCurrency">
        <option value="BGN">BGN</option>
        <option value="EUR">EUR</option>
        <option value="USD">USD</option>
      </select>
    </div>
    <div id="themeToggle" class="theme-toggle" title="–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —Ç–µ–º—É"><span class="theme-icon"><span class="icon sun">‚òÄÔ∏è</span><span class="icon moon">üåô</span></span></div>
    <div id="helpToggle" class="help-toggle" title="–ü–æ–∫–∞–∑–∞—Ç—å —Å–ø—Ä–∞–≤–∫—É"><span class="help-icon">‚ùì</span></div>
    <button id="btnClearStorageGN" class="icon-btn" title="–û—á–∏—Å—Ç–∏—Ç—å –¥–∞–Ω–Ω—ã–µ (FinBoard)">
      <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M3 6h18"/><path d="M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/><path d="M19 6l-1 14a2 2 0 0 1-2 2H8a2 2 0 0 1-2-2L5 6"/><path d="M10 11v6"/><path d="M14 11v6"/></svg>
    </button>
    <div id="settingsToggle" class="settings-toggle" title="–ù–∞—Å—Ç—Ä–æ–π–∫–∏"><span class="settings-icon">‚öôÔ∏è</span></div>
  </header>
  <main class="content gn" style="grid-column:1 / -1">
    <div id="helpBlock" style="display:none"></div>
    <div class="row cols-2" style="margin-top:0">
      <div class="card">
        <div class="gn-section">
          <h2>–í–≤–æ–¥ –¥–∞–Ω–Ω—ã—Ö</h2>
          <div class="hr"></div>
          <div class="grid-sm">
            <div>
              <label>–ú–µ—Å—è—á–Ω–∞—è –∑/–ø (gross BGN)</label>
              <input id="inpMonthly" type="number" step="0.01" value="1000" />
            </div>
            <div>
              <label>–ì–æ–¥–æ–≤–∞—è –∑/–ø (gross BGN)</label>
              <input id="inpAnnual" type="number" step="0.01" value="12000" />
            </div>
            <div>
              <label>–°—Ç–∞–∂ (–ª–µ—Ç)</label>
              <input id="inpSeniority" type="number" step="1" min="0" value="0" />
            </div>
            <div>
              <label class="inline">–ì–æ–¥–æ–≤–∞—è (gross BGN, —Å —É—á–µ—Ç–æ–º —Å—Ç–∞–∂–∞)<button id="btnOpenCompare" class="icon-btn" title="–°—Ä–∞–≤–Ω–∏—Ç—å">‚öñÔ∏è</button></label>
              <input id="inpAnnualWithSen" type="number" step="0.01" />
            </div>
            <div>
              <label>–ú–µ—Å—è—Ü</label>
              <select id="selMonth"></select>
            </div>
            <div>
              <label>–ì–æ–¥</label>
              <input id="inpYear" type="number" />
            </div>
          </div>
          <div class="help" id="dayStats" style="margin-top:6px"></div>
          <div class="hr"></div>
          <div class="opt-toggles" style="margin-top:8px">
            <label class="pill"><input id="chkSick" type="checkbox" /> –ë–æ–ª—å–Ω–∏—á–Ω—ã–µ</label>
            <label class="pill"><input id="chkOver" type="checkbox" /> –û–≤–µ—Ä—Ç–∞–π–º</label>
            <label class="pill"><input id="chkSport" type="checkbox" /> SportCard</label>
            <label class="pill"><input id="chkIns" type="checkbox" /> –°—Ç—Ä–∞—Ö–æ–≤–∫–∞</label>
            <label class="pill"><input id="chkCorr" type="checkbox" /> –ö–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞</label>
          </div>
          <div id="sickBlock" class="opt-block" style="display:none">
            <div class="opt-head">–ë–æ–ª—å–Ω–∏—á–Ω—ã–µ</div>
            <div class="grid-sm">
              <div>
                <label>–î–Ω–µ–π</label>
                <input id="inpSickDays" type="number" min="0" value="0" />
              </div>
            </div>
          </div>
          <div id="overBlock" class="opt-block" style="display:none">
            <div class="opt-head">–û–≤–µ—Ä—Ç–∞–π–º</div>
            <div class="grid-sm">
              <div>
                <label>–ö–æ–ª-–≤–æ</label>
                <input id="inpOverAmt" type="number" min="0" value="0" />
              </div>
              <div>
                <label>–¢–∏–ø</label>
                <select id="selOverType"><option value="days">–î–Ω–∏</option><option value="hours">–ß–∞—Å—ã</option></select>
              </div>
            </div>
          </div>
          <div id="sportBlock" class="opt-block" style="display:none">
            <div class="opt-head">Sport Card</div>
            <div class="grid-sm">
              <div>
                <label>–í–∑—Ä–æ—Å–ª—ã—Ö</label>
                <input id="inpSportA" type="number" min="0" value="0" />
              </div>
              <div>
                <label>–°—É–º–º–∞ (BGN)</label>
                <input id="inpSportAVal" type="number" min="0" value="90" />
              </div>
              <div>
                <label>–î–µ—Ç–µ–π</label>
                <input id="inpSportC" type="number" min="0" value="0" />
              </div>
              <div>
                <label>–°—É–º–º–∞ (BGN)</label>
                <input id="inpSportCVal" type="number" min="0" value="39" />
              </div>
            </div>
          </div>
          <div id="insBlock" class="opt-block" style="display:none">
            <div class="opt-head">–°—Ç—Ä–∞—Ö–æ–≤–∫–∞</div>
            <div class="grid-sm">
              <div>
                <label>–ö–æ–ª-–≤–æ</label>
                <input id="inpInsCount" type="number" min="0" value="0" />
              </div>
              <div>
                <label>–°—É–º–º–∞ (BGN)</label>
                <input id="inpInsVal" type="number" min="0" value="70" />
              </div>
            </div>
          </div>
          <div id="corrBlock" class="opt-block" style="display:none">
            <div class="opt-head">–ö–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞</div>
            <div class="grid-sm">
              <div>
                <label>–°—É–º–º–∞ (BGN)</label>
                <input id="inpCorrVal" type="number" step="0.01" value="0" />
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="card">
        <div class="gn-section">
          <h2>–†–µ–∑—É–ª—å—Ç–∞—Ç—ã</h2>
          <div class="hr"></div>
          <div class="gn-kpis" id="kpiGrid" style="grid-template-columns:1fr 1fr 1fr">
            <div class="pill"><b>–ö–∞—Ç–µ–≥–æ—Ä–∏—è</b></div>
            <div class="pill"><b>Net</b></div>
            <div class="pill"><b>Gross</b></div>

            <div class="pill">–ì–æ–¥</div>
            <div class="pill"><b id="kNetYear"></b></div>
            <div class="pill"><b id="kGrossYear"></b></div>

            <div class="pill">–ú–µ—Å—è—Ü</div>
            <div class="pill"><b id="kNetMonth"></b></div>
            <div class="pill"><b id="kGrossMonth"></b></div>

            <div class="pill">–î–µ–Ω—å (—Ä–∞–±–æ—á–∏–π / –∫–∞–ª–µ–Ω–¥–∞—Ä–Ω—ã–π)</div>
            <div class="pill"><b id="kNetDay"></b></div>
            <div class="pill"><b id="kGrossDay"></b></div>

            <div class="pill">–ß–∞—Å (—Ä–∞–±–æ—á–∏–π / –∫–∞–ª–µ–Ω–¥–∞—Ä–Ω—ã–π)</div>
            <div class="pill"><b id="kNetHour"></b></div>
            <div class="pill"><b id="kGrossHour"></b></div>
          </div>          
        </div>
        <div class="hr"></div>
        <div class="controls"><b>–ì—Ä–∞—Ñ–∏–∫ Gross vs Net</b><span class="right"></span></div>
        <canvas id="gnBar"></canvas>
      </div>
    </div>
  </main>
  <div id="dashOverlay" class="overlay"></div>
  <div id="dashModal" class="modal">
    <div class="head inline"><h3 id="dashModalTitle" style="margin:0"></h3><span class="right"></span><button id="btnCloseDashModal" class="icon-btn" title="–ó–∞–∫—Ä—ã—Ç—å">‚úï</button></div>
    <div id="dashModalContent"></div>
  </div>
</div>

<script>
  initTheme()
  $('#themeToggle').onclick = toggleTheme
  $('#helpToggle').onclick = toggleHelp
  const st=$('#settingsToggle'); if(st){ st.onclick = ()=>{ try{ PREFS.openModal() }catch(_){ } } }
  // –û—á–∏—Å—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∞–Ω–∞–ª–æ–≥–∏—á–Ω–∞ –æ—Å–Ω–æ–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ
  const clearBtn = document.getElementById('btnClearStorageGN')
  if(clearBtn){
    clearBtn.onclick = () => {
      if(confirm('–û—á–∏—Å—Ç–∏—Ç—å localStorage (–≤—Å–µ –¥–∞–Ω–Ω—ã–µ FinBoard –±—É–¥—É—Ç —É–¥–∞–ª–µ–Ω—ã)?')){
        try{ localStorage.removeItem('ofb_vault'); localStorage.removeItem('finboard_theme'); localStorage.removeItem('gn_state'); localStorage.removeItem('ofb_prefs') }catch(_){ }
        alert('–î–∞–Ω–Ω—ã–µ –æ—á–∏—â–µ–Ω—ã. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ FinBoard –¥–ª—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏.')
      }
    }
  }
  {
    const hb = document.getElementById('helpBlock')
    if(hb){
      hb.innerHTML = `
        <div class="card" style="margin-bottom:12px">
          <h2 style="margin:0 0 6px 0">Gross/Net –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä ‚Äî —Å–ø—Ä–∞–≤–∫–∞</h2>
          <div class="help">
            <ol>
              <li><b>–ó–∞—Ä–ø–ª–∞—Ç–∞:</b> —É–∫–∞–∂–∏—Ç–µ –º–µ—Å—è—á–Ω—É—é –∏–ª–∏ –≥–æ–¥–æ–≤—É—é ‚Äî –≤—Ç–æ—Ä–∞—è –ø–µ—Ä–µ—Å—á–∏—Ç–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏. –ü–æ–ª–µ ¬´–ì–æ–¥–æ–≤–∞—è (—Å —É—á–µ—Ç–æ–º —Å—Ç–∞–∂–∞)¬ª –º–æ–∂–Ω–æ –ø—Ä–∞–≤–∏—Ç—å ‚Äî –º–µ—Å—è—á–Ω–∞—è –ø–µ—Ä–µ—Å—á–∏—Ç–∞–µ—Ç—Å—è –æ–±—Ä–∞—Ç–Ω–æ.</li>
              <li><b>–°—Ç–∞–∂:</b> –ø—Ä–∏–±–∞–≤–∫–∞ 0.6% –∑–∞ –∫–∞–∂–¥—ã–π –≥–æ–¥ —Å—Ç–∞–∂–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–ª–∏—è–µ—Ç –Ω–∞ –±—Ä—É—Ç—Ç–æ.</li>
              <li><b>–ú–µ—Å—è—Ü/–ì–æ–¥:</b> –≤–ª–∏—è–µ—Ç –Ω–∞ —Ä–∞—Å—á–µ—Ç —Ä–∞–±–æ—á–∏—Ö/–∫–∞–ª–µ–Ω–¥–∞—Ä–Ω—ã—Ö –¥–Ω–µ–π (—É—á—Ç–µ–Ω—ã –±–æ–ª–≥–∞—Ä—Å–∫–∏–µ –ø—Ä–∞–∑–¥–Ω–∏–∫–∏ –∏ –ø—Ä–∞–≤–æ—Å–ª–∞–≤–Ω–∞—è –ü–∞—Å—Ö–∞).</li>
              <li><b>–û–ø—Ü–∏–∏:</b> –≤–∫–ª—é—á–∞–π—Ç–µ –Ω—É–∂–Ω—ã–µ —á–µ–∫–±–æ–∫—Å—ã, —Ç–æ–≥–¥–∞ –ø–æ—è–≤—è—Ç—Å—è —Å–≤—è–∑–∞–Ω–Ω—ã–µ –ø–æ–ª—è: –±–æ–ª—å–Ω–∏—á–Ω—ã–µ (—Ä–∞–±–æ—Ç–æ–¥–∞—Ç–µ–ª—å –æ–ø–ª–∞—á–∏–≤–∞–µ—Ç <b>–ø–µ—Ä–≤—ã–µ 2 —Ä–∞–±. –¥–Ω—è –ø–æ 70%</b> ‚Äî —ç—Ç–∞ —Å—É–º–º–∞ <b>–Ω–µ –æ–±–ª–∞–≥–∞–µ—Ç—Å—è 10% –ù–î–§–õ</b>, –Ω–æ –≤—Ö–æ–¥–∏—Ç –≤ –±–∞–∑—É –¥–ª—è –≤–∑–Ω–æ—Å–æ–≤; —Å 3‚Äë–≥–æ –¥–Ω—è –ø–ª–∞—Ç–∏—Ç –ù–û–ò), –æ–≤–µ—Ä—Ç–∞–π–º (–¥–Ω–∏/—á–∞—Å—ã √ó2), Sport Card, —Å—Ç—Ä–∞—Ö–æ–≤–∫–∞, –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞.</li>
              <li><b>–ò—Ç–æ–≥–∏:</b> –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –ù–µ—Ç—Ç–æ –∏ –ë—Ä—É—Ç—Ç–æ –∑–∞ –º–µ—Å—è—Ü/–≥–æ–¥, –∞ —Ç–∞–∫–∂–µ –∑–∞ –¥–µ–Ω—å/—á–∞—Å (—Ä–∞–±–æ—á–∏–π/–∫–∞–ª–µ–Ω–¥–∞—Ä–Ω—ã–π). –í–∞–ª—é—Ç–∞ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç—Å—è –≤–≤–µ—Ä—Ö—É –∏ –≤–ª–∏—è–µ—Ç –Ω–∞ KPI –∏ –≥—Ä–∞—Ñ–∏–∫.</li>
              <li><b>–°—Ä–∞–≤–Ω–µ–Ω–∏–µ:</b> <span title="–°—Ä–∞–≤–Ω–∏—Ç—å">‚öñÔ∏è</span> –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å—Ä–∞–≤–Ω–∏—Ç—å –¥–≤–∞ –∑–Ω–∞—á–µ–Ω–∏—è –∏ —É–≤–∏–¥–µ—Ç—å —Ä–∞–∑–Ω–∏—Ü—É –≤ –ø—Ä–æ—Ü–µ–Ω—Ç–∞—Ö –∏ —Å—É–º–º–µ. –í–≤–æ–¥ —Ç—Ä–∞–∫—Ç—É–µ—Ç—Å—è –∫–∞–∫ <b>BGN</b> (–≤–∞–ª—é—Ç–∞ –Ω–µ —É–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –≤ –¥–∏–∞–ª–æ–≥–µ).</li>
              <li><b>–ó–∞—Ä–ø–ª–∞—Ç–Ω—ã–π —Å–µ–∫—É–Ω–¥–æ–º–µ—Ä:</b> –∫–Ω–æ–ø–∫–∞ <b>üí∏</b> –≤ —à–∞–ø–∫–µ. –°—á–∏—Ç–∞–µ—Ç ¬´–∫–∞–ø–∞–Ω–∏–µ¬ª Net/Gross –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ –∑–∞ –∫–∞–ª–µ–Ω–¥–∞—Ä–Ω—ã–π/—Ä–∞–±–æ—á–∏–π —á–∞—Å, –∏—Å—Ö–æ–¥—è –∏–∑ —Ç–µ–∫—É—â–∏—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∏ –≤—ã–±—Ä–∞–Ω–Ω–æ–π –≤–∞–ª—é—Ç—ã. Space ‚Äî —Å—Ç–∞—Ä—Ç/—Å—Ç–æ–ø.</li>
            </ol>
            <div class="warnbox" style="margin-top:8px">
              –ü—Ä–∞–≤–∏–ª–∞ 2025: —É–¥–µ—Ä–∂–∞–Ω–∏—è —Ä–∞–±–æ—Ç–Ω–∏–∫–∞ 13.78% –æ—Ç –æ—Å–∏–≥—É—Ä–∏—Ç–µ–ª–Ω–∞ –±–∞–∑–∞; <b>cap 3750</b> –¥–æ 03.2025 –∏ <b>4130</b> —Å 04.2025; –ù–î–§–õ 10% –æ—Ç –±–∞–∑—ã (–±–µ–∑ —Å—É–º–º—ã –∑–∞ –¥–Ω–∏ 1‚Äì2 –ø–æ 70%). –û–≤–µ—Ä—Ç–∞–π–º √ó2. –ù–µ—Ç—Ç–æ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–º.
            </div>
            <div class="success" style="margin-top:8px"><b>–ì–æ—Ä—è—á–∏–µ –∫–ª–∞–≤–∏—à–∏:</b> Ctrl+Alt+= (–∏–ª–∏ +) ‚Äî —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å—Ç–∞–∂ –∏ –≥–æ–¥–æ–≤—É—é —Å–æ —Å—Ç–∞–∂–µ–º; Ctrl+Alt+0 ‚Äî –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å.</div>
          </div>
        </div>`
    }
  }
  // Apply preferred currency to selector on load
  try{ const cur = (window.PREFS && PREFS.get && PREFS.get().preferredCurrency) || 'BGN'; const sel = document.getElementById('selCurrency'); if(sel){ sel.value = cur } }catch(_){ }
</script>
</body>
</html>

